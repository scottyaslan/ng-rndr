/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

(function(e,t){typeof define=="function"&&define.amd?define(["jquery","angular"],t):typeof exports=="object"&&typeof module=="object"?module.exports=t(e.$,e.angular):t(e.$,e.angular)})(this,function(){var t,n,r;return function(e){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v,m=t&&t.split("/"),g=l.map,y=g&&g["*"]||{};if(e){e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e[0].charAt(0)==="."&&m&&(v=m.slice(0,m.length-1),e=v.concat(e));for(c=0;c<e.length;c++){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===0||c===1&&e[2]===".."||e[c-1]==="..")continue;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}if((m||y)&&g){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(m)for(h=m.length;h>0;h-=1){i=g[m.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&y&&y[r]&&(a=y[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(t,n){return function(){var r=p.call(arguments,0);return typeof r[0]!="string"&&r.length===1&&r.push(null),s.apply(e,r.concat([t,n]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(t){if(v(f,t)){var n=f[t];delete f[t],c[t]=!0,i.apply(e,n)}if(!v(a,t)&&!v(c,t))throw new Error("No "+t);return a[t]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return e?E(e):[]}function x(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0],s=t[1];return e=r[1],i&&(i=m(i,s),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(s)):e=m(e,s):(e=m(e,s),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:x(e)}}},i=function(t,n,r,i){var s,l,h,p,d,m,y=[],E=typeof r,x;i=i||t,m=S(i);if(E==="undefined"||E==="function"){n=!n.length&&r.length?["require","exports","module"]:n;for(d=0;d<n.length;d+=1){p=o(n[d],m),l=p.f;if(l==="require")y[d]=u.require(t);else if(l==="exports")y[d]=u.exports(t),x=!0;else if(l==="module")s=y[d]=u.module(t);else if(v(a,l)||v(f,l)||v(c,l))y[d]=w(l);else{if(!p.p)throw new Error(t+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),y[d]=a[l]}}h=r?r.apply(a[t],y):undefined;if(t)if(s&&s.exports!==e&&s.exports!==a[t])a[t]=s.exports;else if(h!==e||!x)a[t]=h}else t&&(a[t]=r)},t=n=s=function(t,n,r,a,f){if(typeof t=="string")return u[t]?u[t](n):w(o(t,S(n)).f);if(!t.splice){l=t,l.deps&&s(l.deps,l.callback);if(!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},typeof r=="function"&&(r=a,a=f),a?i(e,t,n,r):setTimeout(function(){i(e,t,n,r)},4),s},s.config=function(e){return s(e)},t._defined=a,r=function(e,t,n){if(typeof e!="string")throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},r.amd={jQuery:!0}}(),r("../node_modules/almond/almond",function(){}),r("render/directives/renderingEngineDirective",[],function(){"use strict";return function(){return{restrict:"E",scope:{engine:"=",input:"="},link:{pre:function(e,t,n){e.engine.element=$(t),e.engine.draw(e.input)}}}}}),r("render/services/aggregators",[],function(){"use strict";return function(e,t){function n(){this.availableAggregators,this.availableAggregatorNames,this.availableAggregatorOptions,this.aggregatorTemplates,this.init()}return n.prototype={constructor:n,init:function(){var n=this;n.availableAggregators={},n.availableAggregatorNames=Object.keys(n.availableAggregators),n.aggregatorTemplates=e,n.addAggregator("Count",n.aggregatorTemplates.count(t.usFmtInt())),n.addAggregator("Count Unique Values",n.aggregatorTemplates.countUnique(t.usFmtInt())),n.addAggregator("List Unique Values",n.aggregatorTemplates.listUnique(", ")),n.addAggregator("Sum",n.aggregatorTemplates.sum(t.usFmt())),n.addAggregator("Integer Sum",n.aggregatorTemplates.sum(t.usFmtInt())),n.addAggregator("Average",n.aggregatorTemplates.average(t.usFmt())),n.addAggregator("Minimum",n.aggregatorTemplates.min(t.usFmt())),n.addAggregator("Maximum",n.aggregatorTemplates.max(t.usFmt())),n.addAggregator("Sum over Sum",n.aggregatorTemplates.sumOverSum(t.usFmt())),n.addAggregator("80% Upper Bound",n.aggregatorTemplates.sumOverSumBound80(!0,t.usFmt())),n.addAggregator("80% Lower Bound",n.aggregatorTemplates.sumOverSumBound80(!1,t.usFmt())),n.addAggregator("Sum as Fraction of Total",n.aggregatorTemplates.fractionOf(n.aggregatorTemplates.sum(),"total",t.usFmtPct())),n.addAggregator("Sum as Fraction of Rows",n.aggregatorTemplates.fractionOf(n.aggregatorTemplates.sum(),"row",t.usFmtPct())),n.addAggregator("Sum as Fraction of Columns",n.aggregatorTemplates.fractionOf(n.aggregatorTemplates.sum(),"col",t.usFmtPct())),n.addAggregator("Count as Fraction of Total",n.aggregatorTemplates.fractionOf(n.aggregatorTemplates.count(),"total",t.usFmtPct())),n.addAggregator("Count as Fraction of Rows",n.aggregatorTemplates.fractionOf(n.aggregatorTemplates.count(),"row",t.usFmtPct())),n.addAggregator("Count as Fraction of Columns",n.aggregatorTemplates.fractionOf(n.aggregatorTemplates.count(),"col",t.usFmtPct()))},addAggregator:function(e,t){var n=this;n.availableAggregators[e]=t,n.availableAggregatorNames=Object.keys(n.availableAggregators)}},new n}}),r("render/services/aggregatorTemplates",[],function(){"use strict";return function(e){function t(){}return t.prototype={constructor:t,count:function(t){return t==null&&(t=e.usFmtInt),function(){return function(e,n,r){return{count:0,push:function(){return this.count++},value:function(){return this.count},format:t}}}},countUnique:function(t){return t==null&&(t=e.usFmtInt),function(e){var n;return n=e[0],function(e,r,i){return{uniq:[],push:function(e){var t;if(t=e[n],indexOf.call(this.uniq,t)<0)return this.uniq.push(e[n])},value:function(){return this.uniq.length},format:t,numInputs:n!=null?0:1}}}},listUnique:function(e){return function(t){var n;return n=t[0],function(t,r,i){return{uniq:[],push:function(e){var t;if(t=e[n],indexOf.call(this.uniq,t)<0)return this.uniq.push(e[n])},value:function(){return this.uniq.join(e)},format:function(e){return e},numInputs:n!=null?0:1}}}},sum:function(t){return t==null&&(t=e.usFmt),function(e){var n;return n=e[0],function(e,r,i){return{sum:0,push:function(e){if(!isNaN(parseFloat(e[n])))return this.sum+=parseFloat(e[n])},value:function(){return this.sum},format:t,numInputs:n!=null?0:1}}}},min:function(t){return t==null&&(t=e.usFmt),function(e){var n;return n=e[0],function(e,r,i){return{val:null,push:function(e){var t,r;r=parseFloat(e[n]);if(!isNaN(r))return this.val=Math.min(r,(t=this.val)!=null?t:r)},value:function(){return this.val},format:t,numInputs:n!=null?0:1}}}},max:function(t){return t==null&&(t=e.usFmt),function(e){var n;return n=e[0],function(e,r,i){return{val:null,push:function(e){var t,r;r=parseFloat(e[n]);if(!isNaN(r))return this.val=Math.max(r,(t=this.val)!=null?t:r)},value:function(){return this.val},format:t,numInputs:n!=null?0:1}}}},average:function(t){return t==null&&(t=e.usFmt),function(e){var n;return n=e[0],function(e,r,i){return{sum:0,len:0,push:function(e){if(!isNaN(parseFloat(e[n])))return this.sum+=parseFloat(e[n]),this.len++},value:function(){return this.sum/this.len},format:t,numInputs:n!=null?0:1}}}},sumOverSum:function(t){return t==null&&(t=e.usFmt),function(e){var n,r;return r=e[0],n=e[1],function(e,i,s){return{sumNum:0,sumDenom:0,push:function(e){isNaN(parseFloat(e[r]))||(this.sumNum+=parseFloat(e[r]));if(!isNaN(parseFloat(e[n])))return this.sumDenom+=parseFloat(e[n])},value:function(){return this.sumNum/this.sumDenom},format:t,numInputs:r!=null&&n!=null?0:2}}}},sumOverSumBound80:function(t,n){return t==null&&(t=!0),n==null&&(n=e.usFmt),function(e){var r,i;return i=e[0],r=e[1],function(e,s,o){return{sumNum:0,sumDenom:0,push:function(e){isNaN(parseFloat(e[i]))||(this.sumNum+=parseFloat(e[i]));if(!isNaN(parseFloat(e[r])))return this.sumDenom+=parseFloat(e[r])},value:function(){var e;return e=t?1:-1,(.821187207574908/this.sumDenom+this.sumNum/this.sumDenom+1.2815515655446004*e*Math.sqrt(.410593603787454/(this.sumDenom*this.sumDenom)+this.sumNum*(1-this.sumNum/this.sumDenom)/(this.sumDenom*this.sumDenom)))/(1+1.642374415149816/this.sumDenom)},format:n,numInputs:i!=null&&r!=null?0:2}}}},fractionOf:function(t,n,r){return n==null&&(n="total"),r==null&&(r=e.usFmtPct),function(){var e;return e=1<=arguments.length?slice.call(arguments,0):[],function(i,s,o){return{selector:{total:[[],[]],row:[s,[]],col:[[],o]}[n],inner:t.apply(null,e)(i,s,o),push:function(e){return this.inner.push(e)},format:r,value:function(){return this.inner.value()/i.getAggregator.apply(i,this.selector).inner.value()},numInputs:t.apply(null,e)().numInputs}}}}},new t}}),r("render/services/PivotDataFactory",[],function(){"use strict";return function(e){function t(){this.colAttrs,this.rowAttrs,this.valAttrs,this.sorters,this.tree,this.rowKeys,this.colKeys,this.rowTotals,this.colTotals,this.allTotal,this.sorted,this.aggregatorName}return t.prototype={constructor:t,init:function(t,n){var r=this;r.aggregatorName=n.aggregatorName,r.colAttrs=n.cols,r.rowAttrs=n.rows,r.valAttrs=n.vals,r.sorters=n.sorters,r.tree={},r.rowKeys=[],r.colKeys=[],r.rowTotals={},r.colTotals={},r.allTotal=n.aggregator(r,[],[]),r.sorted=!1,e.forEachRecord(t,n.derivedAttributes,function(e){return function(t){if(n.filter(t))return e.processRecord(t,n)}}(r))},arrSort:function(t){var n,r;return r=function(){var r,i,s;s=[];for(r=0,i=t.length;r<i;r++)n=t[r],s.push(e.getSort(this.sorters,n));return s}.call(this),function(e,t){var n,i,s;for(i in r){s=r[i],n=s(e[i],t[i]);if(n!==0)return n}return 0}},sortKeys:function(){if(!this.sorted)return this.sorted=!0,this.rowKeys.sort(this.arrSort(this.rowAttrs)),this.colKeys.sort(this.arrSort(this.colAttrs))},getColKeys:function(){return this.sortKeys(),this.colKeys},getRowKeys:function(){return this.sortKeys(),this.rowKeys},processRecord:function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d;n=[],p=[],f=this.colAttrs;for(s=0,o=f.length;s<o;s++)d=f[s],n.push((l=e[d])!=null?l:"null");c=this.rowAttrs;for(a=0,u=c.length;a<u;a++)d=c[a],p.push((h=e[d])!=null?h:"null");i=p.join(String.fromCharCode(0)),r=n.join(String.fromCharCode(0)),this.allTotal.push(e),p.length!==0&&(this.rowTotals[i]||(this.rowKeys.push(p),this.rowTotals[i]=t.aggregator(this,p,[])),this.rowTotals[i].push(e)),n.length!==0&&(this.colTotals[r]||(this.colKeys.push(n),this.colTotals[r]=t.aggregator(this,[],n)),this.colTotals[r].push(e));if(n.length!==0&&p.length!==0)return this.tree[i]||(this.tree[i]={}),this.tree[i][r]||(this.tree[i][r]=t.aggregator(this,p,n)),this.tree[i][r].push(e)},getAggregator:function(e,t){var n,r,i;return i=e.join(String.fromCharCode(0)),r=t.join(String.fromCharCode(0)),e.length===0&&t.length===0?n=this.allTotal:e.length===0?n=this.colTotals[r]:t.length===0?n=this.rowTotals[i]:n=this.tree[i][r],n!=null?n:{value:function(){return null},format:function(){return""}}}},t}}),r("render/services/renderers",[],function(){"use strict";return function(){function e(){this.availableRenderers,this.availableRendererNames,this.availableRendererOptions,this.init()}return e.prototype={constructor:e,init:function(){var e=this;e.availableRenderers={},e.availableRendererNames=[],e.availableRendererOptions={}},addRenderers:function(e){var t=this;$.extend(t.availableRenderers,e),t.availableRendererNames=Object.keys(t.availableRenderers)},setRendererOptions:function(e,t){var n=this;n.availableRendererOptions[e]=t}},new e}}),r("render/services/RenderingEngine",[],function(){"use strict";return function(t,n,r,i,s,o,u,a){function f(){this.id,this.element,this.disabled,this.title,this.rendererName,this.aggregatorName,this.aggInputAttributeName,this.numInputsToProcess,this.axisValues,this.shownAttributes,this.availableAttributes,this.tblCols,this.cols,this.rows,this.attributesAvailableForRowsAndCols,this.attributeFilterExclusions,this.attributeFilterInclusions,this.tile}return f.prototype={constructor:f,init:function(e,t){var r=this;t===undefined||t===""?r.id=n.generateUUID():r.id=t,r.dataSourceConfigId=e,r.title="Untitiled",r.rendererName="Table",r.aggregatorName="Count",r.aggInputAttributeName=[],r.numInputsToProcess=[],r.axisValues={},r.shownAttributes=[],r.availableAttributes=[],r.tblCols=[],r.cols=[],r.rows=[],r.attributesAvailableForRowsAndCols=[],r.attributeFilterExclusions={},r.attributeFilterInclusions={}},setRendererName:function(e,t){var n=this;n.rendererName=e,n.draw(t)},setNumberOfAggregateInputs:function(){var n=this,r;try{r=t.availableAggregators[n.aggregatorName]([])().numInputs}catch(i){e=i,typeof console!="undefined"&&console!==null&&console.error(e.stack)}r===undefined?(n.numInputsToProcess=new Array,n.aggInputAttributeName=new Array):(n.numInputsToProcess=new Array(r),n.aggInputAttributeName.length!==r&&(n.aggInputAttributeName=new Array(r)))},setAggregatorName:function(e){var t=this;t.aggregatorName=e},isExcluded:function(e,t){var n=this;return n.attributeFilterExclusions[e]!==undefined?n.attributeFilterExclusions[e].indexOf(t)>=0?!1:!0:!0},addExclusionFilter:function(e,t){var n=this;if(n.attributeFilterExclusions[e]!==undefined){var r=this.attributeFilterExclusions[e].indexOf(t);r>=0?n.attributeFilterExclusions[e].splice(r,1):n.attributeFilterExclusions[e].push(t)}else n.attributeFilterExclusions[e]=[],n.attributeFilterExclusions[e].push(t);n.attributeFilterInclusions[e]=[],angular.forEach(n.axisValues[e],function(t,r){n.attributeFilterExclusions[e].indexOf(r)<0&&n.attributeFilterInclusions[e].push(r)})},addInclusionFilter:function(e,t){var n=this;n.attributeFilterInclusions[e]=[],n.attributeFilterExclusions[e]=[],n.addExclusionFilter(e,t);var r=n.attributeFilterInclusions[e];n.attributeFilterInclusions[e]=n.attributeFilterExclusions[e],n.attributeFilterExclusions[e]=r},draw:function(u){var f=this,l=s.defer();return a.$emit("RenderingEngine:draw:begin"),o(function(s){r.availableRendererOptions.renderingEngineId=f.id,r.availableRendererOptions.numRows=f.rows.length,r.availableRendererOptions.numCols=f.cols.length,angular.forEach(r.availableRendererOptions,function(e,t){switch(t){case"datatables":e.height=f.element.parent().parent().innerHeight()-24-40-31-31-22-(f.cols.length+1)*30+"px",e.width=f.element.parent().parent().innerWidth();break;case"gchart":e.height=f.element.parent().parent().innerHeight()-24-10,e.width=f.element.parent().parent().innerWidth();break;case"c3":e.size.height=f.element.parent().parent().innerHeight()-24-10,e.size.width=f.element.parent().parent().innerWidth();break;case"d3":e.height=function(){return f.element.parent().parent().innerHeight()},e.width=function(){return f.element.parent().parent().innerWidth()-16};break;default:}}),s!==undefined?s=n.convertToArray(s):s=[];if(s!==undefined&&s.length>0){f.availableAttributes=f.rows.concat(f.cols);var o={cols:f.cols,rows:f.rows,vals:f.aggInputAttributeName,hiddenAttributes:[],filter:function(e){var t,r;for(var i in f.attributeFilterExclusions){t=f.attributeFilterExclusions[i];if(r=""+e[i],n.indexOf.call(t,r)>=0)return!1}return!0},aggregator:t.availableAggregators[f.aggregatorName](f.aggInputAttributeName),aggregatorName:f.aggregatorName,sorters:function(){},derivedAttributes:{}};f.tblCols=[],f.tblCols=function(){var e,t;e=s[0],t=[];for(var r in e){if(!n.hasProp.call(e,r))continue;t.push(r)}return t}(),f.axisValues={};for(var u=0,c=f.tblCols.length;u<c;u++){var h=f.tblCols[u];f.axisValues[h]={}}n.forEachRecord(s,o.derivedAttributes,function(e){var t,r,i;r=[];for(var s in e){if(!n.hasProp.call(e,s))continue;i=e[s],i==null&&(i="null"),(t=f.axisValues[s])[i]==null&&(t[i]=0),r.push(f.axisValues[s][i]++)}return r}),f.shownAttributes=[],f.shownAttributes=function(){var e,t,r;r=[];for(var t=0,e=f.tblCols.length;t<e;t++){var i=f.tblCols[t];n.indexOf.call(o.hiddenAttributes,i)<0&&r.push(i)}return r}(),f.attributesAvailableForRowsAndCols.length+f.rows.length+f.cols.length!==f.shownAttributes.length&&(f.attributesAvailableForRowsAndCols=f.shownAttributes);var p=null,d=null;try{d=new i,d.init(s,o);try{p=r.availableRenderers[f.rendererName](d,r.availableRendererOptions)}catch(v){e=v,typeof console!="undefined"&&console!==null&&console.error(e.stack),p=$("<span>").html(o.localeStrings.renderError)}}catch(v){e=v,typeof console!="undefined"&&console!==null&&console.error(e.stack),p=$("<span>").html(o.localeStrings.computeError)}f.element.empty(),f.element.append(p.html),a.$emit("RenderingEngine:draw:complete"),p.postRenderFunction&&p.postRenderFunction(p.html,p.postRenderOpts)}l.resolve()},1500,!0,u),l.promise}},f}}),r("render/services/renderingEngineManager",[],function(){"use strict";return function(e,t,n,r){function i(){this.init()}return i.prototype={constructor:i,init:function(){var e=this;e.renderingEngines={},e.activeRenderingEngine=undefined},create:function(t,n){var r=this,i=new e;return i.init(t,n),r.add(i),r.activeRenderingEngine!==undefined&&(r.renderingEngines[r.activeRenderingEngine].active=!1),r.activeRenderingEngine=i.id,i},size:function(){return Object.keys(this.renderingEngines).length},add:function(e){var t=this;t.renderingEngines[e.id]=e},"delete":function(e){var t=this;delete t.renderingEngines[e]},setActiveRenderingEngine:function(e){var t=this;t.activeRenderingEngine=e,angular.forEach(t.renderingEngines,function(t){t.active=!1,t.id===e&&(t.active=!0)})},updateAllRenderingEngineTileSizeAndPosition:function(e){var t=this;angular.forEach(e,function(e){t.renderingEngines[e.id].updateTile($(e).attr("data-sizex"),$(e).attr("data-sizey"),$(e).attr("data-col"),$(e).attr("data-row"))})}},new i}}),r("render/services/dataUtils",[],function(){"use strict";return function(){function e(){}return e.prototype={constructor:e,hasProp:{}.hasOwnProperty,indexOf:[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},convertToArray:function(e){var t,n=this;return t=[],n.forEachRecord(e,{},function(e){return t.push(e)}),t},bind:function(e,t){return function(){return e.apply(t,arguments)}},forEachRecord:function(e,t,n){var r=this,i,s,o,u,a,f,l,c,h,p,d,v;$.isEmptyObject(t)?i=n:i=function(e){var r,i,s;for(r in t)s=t[r],e[r]=(i=s(e))!=null?i:e[r];return n(e)};if($.isFunction(e))return e(i);if($.isArray(e)){if($.isArray(e[0])){p=[];for(o in e){if(!r.hasProp.call(e,o))continue;s=e[o];if(!(o>0))continue;c={},h=e[0];for(u in h){if(!r.hasProp.call(h,u))continue;a=h[u],c[a]=s[u]}p.push(i(c))}return p}d=[];for(f=0,l=e.length;f<l;f++)c=e[f],d.push(i(c));return d}if(e instanceof jQuery)return v=[],$("thead > tr > th",e).each(function(e){return v.push($(this).text())}),$("tbody > tr",e).each(function(e){return c={},$("td",this).each(function(e){return c[v[e]]=$(this).html()}),i(c)});throw new Error("unknown input format")},addSeparators:function(e,t,n){var r,i,s,o;e+="",i=e.split("."),s=i[0],o=i.length>1?n+i[1]:"",r=/(\d+)(\d{3})/;while(r.test(s))s=s.replace(r,"$1"+t+"$2");return s+o},numberFormat:function(e){var t=this,n;return n={digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:"",showZero:!1},e=$.extend(n,e),function(n){var r;return isNaN(n)||!isFinite(n)?"":n===0&&!e.showZero?"":(r=t.addSeparators((e.scaler*n).toFixed(e.digitsAfterDecimal),e.thousandsSep,e.decimalSep),""+e.prefix+r+e.suffix)}},sortAs:function(e){var t=this,n,r,i;r={};for(n in e)i=e[n],r[i]=n;return function(e,n){return r[e]!=null&&r[n]!=null?r[e]-r[n]:r[e]!=null?-1:r[n]!=null?1:t.naturalSort(e,n)}},naturalSort:function(e,t){var n,r,i,s,o,u,a;u=/(\d+)|(\D+)/g,o=/\d/,a=/^0/;if(typeof e=="number"||typeof t=="number")return isNaN(e)?1:isNaN(t)?-1:e-t;n=String(e).toLowerCase(),i=String(t).toLowerCase();if(n===i)return 0;if(!o.test(n)||!o.test(i))return n>i?1:-1;n=n.match(u),i=i.match(u);while(n.length&&i.length){r=n.shift(),s=i.shift();if(r!==s)return o.test(r)&&o.test(s)?r.replace(a,".0")-s.replace(a,".0"):r>s?1:-1}return n.length-i.length},getSort:function(e,t){var n,r=this;return n=e(t),$.isFunction(n)?n:r.naturalSort},usFmt:function(){var e=this;return e.numberFormat()},usFmtInt:function(){var e=this;return e.numberFormat({digitsAfterDecimal:0})},usFmtPct:function(){var e=this;return e.numberFormat({digitsAfterDecimal:1,scaler:100,suffix:"%"})}},new e}}),r("render/services/DataSourceConfiguration",[],function(){"use strict";return function(e){function t(e){this.id,this.flattenDataFunctionString,this.httpConfig,this.name=e}return t.prototype={constructor:t,init:function(){var t=this;t.id=e.generateUUID(),t.httpConfig=angular.toJson({method:"GET",url:"http://nicolas.kruchten.com/pivottable/examples/montreal_2014.csv"}),t.flattenDataFunctionString="return data;"}},t}}),r("render/services/dataSourceConfigurationManager",[],function(){"use strict";return function(e){function t(){this.init()}return t.prototype={constructor:t,init:function(){var e=this;e.dataSourceConfigurations={},e.activeDataSourceConfiguration=undefined},create:function(t){var n=this,r=new e(t);return r.init(),n.add(r),n.activeDataSourceConfiguration=r.id,r.id},add:function(e){var t=this;t.dataSourceConfigurations[e.id]=e},"delete":function(e){var t=this;delete t.dataSourceConfigurations[e]},dataSourceConfigurationsDefined:function(){var e=this;return Object.keys(e.dataSourceConfigurations).length!==0}},new t}}),r("render/services/DataSource",[],function(){"use strict";return function(e,t,n,r){function i(e,t){this.dataSourceConfigId=e,this.data,this.name=t,this.formattedData}return i.prototype={constructor:i,refresh:function(e){var n=[this.acquire(this)];t.all(n).then(function(){this.format(this)})},acquire:function(){n.$emit("dataSource:acquire:begin");var i=this,s=t.defer();return r(angular.fromJson(e.dataSourceConfigurations[this.dataSourceConfigId].httpConfig)).then(function(t){typeof t.data!="string"?i.data=JSON.stringify(t.data):i.data=t.data,s.resolve(),n.$emit("dataSource:acquire:success")},function(t){s.reject(),n.$emit("dataSource:acquire:error")}),s.promise},format:function(){var t=new Function("data",e.dataSourceConfigurations[this.dataSourceConfigId].flattenDataFunctionString);try{this.formattedData=angular.toJson(t(angular.fromJson(this.data)))}catch(n){try{this.formattedData=t(this.data)}catch(n){}}try{this.formattedData=angular.fromJson(this.formattedData)}catch(n){try{this.formattedData=$.csv.toArrays(this.formattedData)}catch(n){}}}},i}}),r("render/services/dataSourceManager",[],function(){"use strict";return function(e){function t(){this.init()}return t.prototype={constructor:t,init:function(){var e=this;e.dataSources={}},create:function(t,n){var r=this;if(t!==undefined){var i=new e(t,n);return r.add(i),i}},add:function(e){var t=this;t.dataSources[e.dataSourceConfigId]=e},"delete":function(e){var t=this;delete t.dataSources[e]},refresh:function(){angular.forEach(this.dataSources,function(e){e.refresh()})}},new t}}),r("ng-rndr",["render/directives/renderingEngineDirective","render/services/aggregators","render/services/aggregatorTemplates","render/services/PivotDataFactory","render/services/renderers","render/services/RenderingEngine","render/services/renderingEngineManager","render/services/dataUtils","render/services/DataSourceConfiguration","render/services/dataSourceConfigurationManager","render/services/DataSource","render/services/dataSourceManager"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=angular.module("ngRndr",[]);e.$inject=[],a.$inject=["dataUtils"],f.$inject=["DataSourceConfiguration"],l.$inject=["dataSourceConfigurationManager","$q","$rootScope","$http"],c.$inject=["DataSource"],t.$inject=["aggregatorTemplates","dataUtils"],n.$inject=["dataUtils"],r.$inject=["dataUtils"],i.$inject=[],s.$inject=["aggregators","dataUtils","renderers","PivotDataFactory","$q","$timeout","$window","$rootScope"],o.$inject=["RenderingEngine","dataSourceConfigurationManager","dataSourceManager","$http"],u.$inject=[],h.directive("renderingEngineDirective",e),h.service("DataSourceConfiguration",a),h.service("dataSourceConfigurationManager",f),h.service("DataSource",l),h.service("dataSourceManager",c),h.service("aggregators",t),h.service("aggregatorTemplates",n),h.service("PivotDataFactory",r),h.service("renderers",i),h.service("RenderingEngine",s),h.service("renderingEngineManager",o),h.service("dataUtils",u)}),n("ng-rndr")});