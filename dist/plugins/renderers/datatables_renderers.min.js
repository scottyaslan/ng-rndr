!function(a,b){void 0===a.ngRndr&&(a.ngRndr={}),void 0===a.ngRndr.plugins&&(a.ngRndr.plugins={}),void 0===a.ngRndr.plugins.renderers&&(a.ngRndr.plugins.renderers={}),"function"==typeof define&&define.amd?define(["jquery"],function(c){return a.ngRndr.plugins.renderers.datatables=b(c)}):"object"==typeof module&&module.exports?module.exports=a.ngRndr.plugins.renderers.datatables=b(require("jquery")):a.ngRndr.plugins.renderers.datatables=b(a.$)}(this,function(a){var b=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;i={clazz:["pvtTable"],locales:{en:{localeStrings:{totals:"Totals"}}}},c=a.extend(!0,i,c),f=b.dataView.colAttrs,n=b.dataView.rowAttrs,p=b.dataView.getRowKeys(),h=b.dataView.getColKeys(),m=document.createElement("table"),a(m).width(c.width+c.widthOffset+"px"),a(m).height(c.height+c.heightOffset+"px"),m.className=c.clazz.join(" "),v=document.createElement("thead"),r=document.createElement("tbody"),t=document.createElement("tfoot"),q=function(a,b,c){var d,e,f,g,h,i,j,k;if(0!==b){for(g=!0,k=d=0,h=c;0<=h?d<=h:d>=h;k=0<=h?++d:--d)a[b-1][k]!==a[b][k]&&(g=!1);if(g)return-1}for(f=0;b+f<a.length;){for(j=!1,k=e=0,i=c;0<=i?e<=i:e>=i;k=0<=i?++e:--e)a[b][k]!==a[b+f][k]&&(j=!0);if(j)break;f++}return f};for(k in f)if(f.hasOwnProperty(k)){e=f[k],x=document.createElement("tr"),0===parseInt(k)&&0!==n.length&&(u=document.createElement("th"),u.setAttribute("colspan",n.length),u.setAttribute("rowspan",f.length),x.appendChild(u)),u=document.createElement("th"),u.className="pvtAxisLabel",a(u).css("white-space","nowrap"),u.innerHTML=e,x.appendChild(u);for(j in h)h.hasOwnProperty(j)&&(g=h[j],A=q(h,parseInt(j),parseInt(k)),A!==-1&&(u=document.createElement("th"),a(u).off("dblclick").on("dblclick",function(c){var d;return d=a.Event("colLabelDrillDownEvent",{event:c,renderingEngineId:b.id}),a(window).trigger(d)}),u.className="pvtColLabel",u.innerHTML=g[k],u.setAttribute("colspan",A),parseInt(k)===f.length-1&&0!==n.length&&u.setAttribute("rowspan",2),x.appendChild(u)));0===parseInt(k)&&(u=document.createElement("th"),u.className="pvtTotalLabel",u.innerHTML=c.locales[b.localeName].localeStrings.totals,u.setAttribute("rowspan",f.length+(0===n.length?0:1)),x.appendChild(u)),v.appendChild(x)}if(0!==n.length){x=document.createElement("tr");for(j in n)n.hasOwnProperty(j)&&(l=n[j],u=document.createElement("th"),a(u).css("white-space","nowrap"),u.className="pvtAxisLabel",u.innerHTML=l,x.appendChild(u));u=document.createElement("th"),0===f.length&&(u.className="pvtTotalLabel",u.innerHTML=c.locales[b.localeName].localeStrings.totals),x.appendChild(u),v.appendChild(x)}for(j in p)if(p.hasOwnProperty(j)){o=p[j],x=document.createElement("tr");for(k in o)o.hasOwnProperty(k)&&(y=o[k],u=document.createElement("th"),a(u).css("white-space","nowrap"),a(u).off("dblclick").on("dblclick",function(c){var d;return d=a.Event("rowLabelDrillDownEvent",{event:c,renderingEngineId:b.id}),a(window).trigger(d)}),u.className="pvtRowLabel",u.innerHTML=y,x.appendChild(u),parseInt(k)===n.length-1&&0!==f.length&&x.appendChild(document.createElement("th")));for(k in h)h.hasOwnProperty(k)&&(g=h[k],d=b.dataView.getAggregator(o,g),z=d.value(),s=document.createElement("td"),s.className="pvtVal row"+j+" col"+k,s.innerHTML=d.format(z),s.setAttribute("data-value",z),a(s).off("dblclick").on("dblclick",function(c){var d;return d=a.Event("pvtValueDrillDownEvent",{event:c,renderingEngineId:b.id}),a(window).trigger(d)}),x.appendChild(s));w=b.dataView.getAggregator(o,[]),z=w.value(),s=document.createElement("td"),s.className="pvtTotal rowTotal",s.innerHTML=w.format(z),s.setAttribute("data-value",z),s.setAttribute("data-for","row"+j),x.appendChild(s),r.appendChild(x)}x=document.createElement("tr"),u=document.createElement("th"),u.className="pvtTotalLabel",u.innerHTML=c.locales[b.localeName].localeStrings.totals,u.setAttribute("colspan",n.length+(0===f.length?0:1)),x.appendChild(u);for(k in h)h.hasOwnProperty(k)&&(g=h[k],w=b.dataView.getAggregator([],g),z=w.value(),s=document.createElement("td"),s.className="pvtTotal colTotal",s.innerHTML=w.format(z),s.setAttribute("data-value",z),s.setAttribute("data-for","col"+k),x.appendChild(s));return w=b.dataView.getAggregator([],[]),z=w.value(),s=document.createElement("td"),s.className="pvtGrandTotal",s.innerHTML=w.format(z),s.setAttribute("data-value",z),x.appendChild(s),m.appendChild(v),m.appendChild(r),t.appendChild(x),m.appendChild(t),m.setAttribute("data-numrows",p.length),m.setAttribute("data-numcols",h.length),m.setAttribute("data-numcolattrs",f.length),m.setAttribute("data-numrowattrs",n.length),m};return a.fn.finalize=function(a){return{html:this}},a.fn.heatmap=function(b,c){var d,e,f,g,h,i,j,k,l,m,n;switch(null==b&&(b="heatmap"),k=this.data("numrows"),j=this.data("numcols"),d=null!=c&&null!=(l=c.heatmap)?l.colorScaleGenerator:void 0,null==d&&(d=function(a){var b,c;return c=Math.min.apply(Math,a),b=Math.max.apply(Math,a),function(a){var d;return d=b===c?0:255-Math.round(255*(a-c)/(b-c)),"rgb(255,"+d+","+d+")"}}),e=function(b){return function(c){var e,f,g;return f=function(d){return b.find(c).each(function(){var b;if(b=a(this).data("value"),null!=b&&isFinite(b))return d(b,a(this))})},g=[],f(function(a){return g.push(a)}),e=d(g),f(function(a,b){return b.css("background-color",e(a))})}}(this),b){case"heatmap":e(".pvtVal");break;case"rowheatmap":for(f=h=0,m=k;0<=m?h<m:h>m;f=0<=m?++h:--h)e(".pvtVal.row"+f);break;case"colheatmap":for(g=i=0,n=j;0<=n?i<n:i>n;g=0<=n?++i:--i)e(".pvtVal.col"+g)}return e(".pvtTotal.rowTotal"),e(".pvtTotal.colTotal"),this},a.fn.barchart=function(){var b,c,d,e,f,g;for(f=this.data("numrows"),e=this.data("numcols"),b=function(b){return function(c){var d,e,f,g;return d=function(d){return b.find(c).each(function(){var b;if(b=a(this).data("value"),null!=b&&isFinite(b))return d(b,a(this))})},g=[],d(function(a){return g.push(a)}),e=Math.max.apply(Math,g),f=function(a){return 100*a/(1.4*e)},d(function(b,c){var d,e;return d=c.text(),e=a("<div>").css({position:"relative"}),e.append(a("<div>").css({position:"absolute",bottom:-2,left:0,right:0,height:f(b)+"%","background-color":"gray"})),e.append(a("<div>").text(d).css({position:"relative","padding-left":"5px","padding-right":"5px"})),c.css({padding:0,"padding-top":"5px","text-align":"center"}).html(e)})}}(this),c=d=0,g=f;0<=g?d<g:d>g;c=0<=g?++d:--d)b(".pvtVal.row"+c);return b(".pvtTotal.colTotal"),this},{Table:function(c,d){return a(b(c,d)).finalize(d)},"Table Barchart":function(c,d){return a(b(c,d)).barchart().finalize(d)},Heatmap:function(c,d){return a(b(c,d)).heatmap("heatmap",d).finalize(d)},"Row Heatmap":function(c,d){return a(b(c,d)).heatmap("rowheatmap",d).finalize(d)},"Col Heatmap":function(c,d){return a(b(c,d)).heatmap("colheatmap",d).finalize(d)}}});
//# sourceMappingURL=datatables_renderers.min.js.map