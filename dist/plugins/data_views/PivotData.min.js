(function(){var t;(t=function(t){return"object"==typeof exports&&"object"==typeof module?t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):(void 0===window.ngRNDR&&(window.ngRNDR={},void 0===window.ngRNDR.plugins&&(window.ngRNDR.plugins={},void 0===window.ngRNDR.plugins.dataViews&&(window.ngRNDR.plugins.dataViews={}))),window.ngRNDR.plugins.dataViews=$.extend({},window.ngRNDR.plugins.dataViews,t(jQuery,d3)),window.ngRNDR.plugins.dataViews)})(function(t){function e(t,e){this.dataUtils=e.dataUtils,this.filter=function(t){var e,a;for(var i in this.meta.attributeFilterExclusions)if(e=this.meta.attributeFilterExclusions[i],a=""+t[i],this.dataUtils.indexOf.call(e,a)>=0)return!1;return!0},this.sorters=function(){},this.axisValues={},this.meta=e.meta,this.meta.colAttrs=e.meta.cols,this.meta.rowAttrs=e.meta.rows,this.meta.valAttrs=e.meta.vals,this.meta.sorters=e.meta.sorters,this.meta.tree={},this.meta.rowKeys=[],this.meta.colKeys=[],this.meta.rowTotals={},this.meta.colTotals={},this.meta.sorted=!1,this.meta.aggregatorName=e.aggregator.name,this.meta.aggregator=e.aggregator.aggregate,this.meta.allTotal=this.meta.aggregator(this,[],[]);var a=this;t=a.dataUtils.convertToArray(t),a.meta.availableAttributes=a.meta.rowAttrs.concat(a.meta.colAttrs),a.meta.tblCols=function(){var e,i;e=t[0],i=[];for(var s in e)a.dataUtils.hasProp.call(e,s)&&i.push(s);return i}();for(var i=0,s=a.meta.tblCols.length;i<s;i++){var r=a.meta.tblCols[i];a.axisValues[r]={}}a.meta.shownAttributes=function(){var t,e,i;i=[];for(var e=0,t=a.meta.tblCols.length;e<t;e++){var s=a.meta.tblCols[e];a.dataUtils.indexOf.call(a.meta.hiddenAttributes,s)<0&&i.push(s)}return i}(),a.meta.attributesAvailableForRowsAndCols.length+a.meta.rows.length+a.meta.cols.length!==a.meta.shownAttributes.length&&(a.meta.attributesAvailableForRowsAndCols=a.meta.shownAttributes),a.dataUtils.forEachRecord(t,a.meta.derivedAttributes,function(t){var e,i,s;i=[];for(var r in t)a.dataUtils.hasProp.call(t,r)&&(s=t[r],null==s&&(s="null"),null==(e=a.axisValues[r])[s]&&(e[s]=0),i.push(a.axisValues[r][s]++));return i}),a.dataUtils.forEachRecord(t,a.meta.derivedAttributes,function(t){return function(e){if(t.filter(e))return t.processRecord(e)}}(a))}return e.prototype={constructor:e,arrSort:function(t){var e,a;return a=function(){var a,i,s;for(s=[],a=0,i=t.length;a<i;a++)e=t[a],s.push(this.dataUtils.getSort(this.sorters,e));return s}.call(this),function(t,e){var i,s,r;for(s in a)if(r=a[s],i=r(t[s],e[s]),0!==i)return i;return 0}},sortKeys:function(){this.meta.sorted||(this.meta.sorted=!0,this.meta.rowKeys.sort(this.arrSort(this.meta.rowAttrs)),this.meta.colKeys.sort(this.arrSort(this.meta.colAttrs)))},getColKeys:function(){return this.sortKeys(),this.meta.colKeys},getRowKeys:function(){return this.sortKeys(),this.meta.rowKeys},processRecord:function(t){var e,a,i,s,r,o,n,l,u,h,m,c,g;for(e=[],c=[],l=this.meta.colAttrs,s=0,r=l.length;s<r;s++)g=l[s],e.push(null!=(u=t[g])?u:"null");for(h=this.meta.rowAttrs,n=0,o=h.length;n<o;n++)g=h[n],c.push(null!=(m=t[g])?m:"null");if(i=c.join(String.fromCharCode(0)),a=e.join(String.fromCharCode(0)),this.meta.allTotal.push(t),0!==c.length&&(this.meta.rowTotals[i]||(this.meta.rowKeys.push(c),this.meta.rowTotals[i]=this.meta.aggregator(this,c,[])),this.meta.rowTotals[i].push(t)),0!==e.length&&(this.meta.colTotals[a]||(this.meta.colKeys.push(e),this.meta.colTotals[a]=this.meta.aggregator(this,[],e)),this.meta.colTotals[a].push(t)),0!==e.length&&0!==c.length)return this.meta.tree[i]||(this.meta.tree[i]={}),this.meta.tree[i][a]||(this.meta.tree[i][a]=this.meta.aggregator(this,c,e)),this.meta.tree[i][a].push(t)},getAggregator:function(t,e){var a,i,s;return s=t.join(String.fromCharCode(0)),i=e.join(String.fromCharCode(0)),a=0===t.length&&0===e.length?this.meta.allTotal:0===t.length?this.meta.colTotals[i]:0===e.length?this.meta.rowTotals[s]:this.meta.tree[s][i],null!=a?a:{value:function(){return null},format:function(){return""}}},isExcluded:function(t,e){var a=this;return void 0===a.meta.attributeFilterExclusions[t]||!(a.meta.attributeFilterExclusions[t].indexOf(e)>=0)},addExclusionFilter:function(t,e){var a=this;if(void 0!==a.meta.attributeFilterExclusions[t]){var i=a.meta.attributeFilterExclusions[t].indexOf(e);i>=0?a.meta.attributeFilterExclusions[t].splice(i,1):a.meta.attributeFilterExclusions[t].push(e)}else a.meta.attributeFilterExclusions[t]=[],a.meta.attributeFilterExclusions[t].push(e);a.meta.attributeFilterInclusions[t]=[],angular.forEach(a.axisValues[t],function(e,i){a.meta.attributeFilterExclusions[t].indexOf(i)<0&&a.meta.attributeFilterInclusions[t].push(i)})},addInclusionFilter:function(t,e){var a=this;a.meta.attributeFilterInclusions[t]=[],a.meta.attributeFilterExclusions[t]=[],a.addExclusionFilter(t,e);var i=a.meta.attributeFilterInclusions[t];a.meta.attributeFilterInclusions[t]=a.meta.attributeFilterExclusions[t],a.meta.attributeFilterExclusions[t]=i}},e})}).call(this);
//# sourceMappingURL=PivotData.min.js.map
