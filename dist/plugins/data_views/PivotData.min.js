(function(){var a;(a=function(a){return"object"==typeof exports&&"object"==typeof module?a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):(void 0===window.ngRNDR&&(window.ngRNDR={},void 0===window.ngRNDR.plugins&&(window.ngRNDR.plugins={},void 0===window.ngRNDR.plugins.dataViews&&(window.ngRNDR.plugins.dataViews={}))),window.ngRNDR.plugins.dataViews=$.extend({},window.ngRNDR.plugins.dataViews,a(jQuery,d3)),window.ngRNDR.plugins.dataViews)})(function(a){function b(a,b){this.dataUtils=b.dataUtils,this.filter=function(a){var b,c;for(var d in this.meta.attributeFilterExclusions)if(b=this.meta.attributeFilterExclusions[d],c=""+a[d],this.dataUtils.indexOf.call(b,c)>=0)return!1;return!0},this.sorters=function(){},this.axisValues={},this.meta=b.meta,this.meta.colAttrs=b.meta.cols,this.meta.rowAttrs=b.meta.rows,this.meta.valAttrs=b.meta.vals,this.meta.sorters=b.meta.sorters,this.meta.tree={},this.meta.rowKeys=[],this.meta.colKeys=[],this.meta.rowTotals={},this.meta.colTotals={},this.meta.sorted=!1,this.meta.aggregatorName=b.aggregator.name,this.meta.aggregator=b.aggregator.aggregate,this.meta.allTotal=this.meta.aggregator(this,[],[]);var c=this;a=c.dataUtils.convertToArray(a),c.meta.availableAttributes=c.meta.rowAttrs.concat(c.meta.colAttrs),c.meta.tblCols=function(){var b,d;b=a[0],d=[];for(var e in b)c.dataUtils.hasProp.call(b,e)&&d.push(e);return d}();for(var d=0,e=c.meta.tblCols.length;d<e;d++){var f=c.meta.tblCols[d];c.axisValues[f]={}}c.meta.shownAttributes=function(){var a,b,d;d=[];for(var b=0,a=c.meta.tblCols.length;b<a;b++){var e=c.meta.tblCols[b];c.dataUtils.indexOf.call(c.meta.hiddenAttributes,e)<0&&d.push(e)}return d}(),c.meta.attributesAvailableForRowsAndCols.length+c.meta.rows.length+c.meta.cols.length!==c.meta.shownAttributes.length&&(c.meta.attributesAvailableForRowsAndCols=c.meta.shownAttributes),c.dataUtils.forEachRecord(a,c.meta.derivedAttributes,function(a){var b,d,e;d=[];for(var f in a)c.dataUtils.hasProp.call(a,f)&&(e=a[f],null==e&&(e="null"),null==(b=c.axisValues[f])[e]&&(b[e]=0),d.push(c.axisValues[f][e]++));return d}),c.dataUtils.forEachRecord(a,c.meta.derivedAttributes,function(a){return function(b){if(a.filter(b))return a.processRecord(b)}}(c))}return b.prototype={constructor:b,arrSort:function(a){var b,c;return c=function(){var c,d,e;for(e=[],c=0,d=a.length;c<d;c++)b=a[c],e.push(this.dataUtils.getSort(this.sorters,b));return e}.call(this),function(a,b){var d,e,f;for(e in c)if(f=c[e],d=f(a[e],b[e]),0!==d)return d;return 0}},sortKeys:function(){this.meta.sorted||(this.meta.sorted=!0,this.meta.rowKeys.sort(this.arrSort(this.meta.rowAttrs)),this.meta.colKeys.sort(this.arrSort(this.meta.colAttrs)))},getColKeys:function(){return this.sortKeys(),this.meta.colKeys},getRowKeys:function(){return this.sortKeys(),this.meta.rowKeys},processRecord:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;for(b=[],m=[],i=this.meta.colAttrs,e=0,f=i.length;e<f;e++)n=i[e],b.push(null!=(j=a[n])?j:"null");for(k=this.meta.rowAttrs,h=0,g=k.length;h<g;h++)n=k[h],m.push(null!=(l=a[n])?l:"null");if(d=m.join(String.fromCharCode(0)),c=b.join(String.fromCharCode(0)),this.meta.allTotal.push(a),0!==m.length&&(this.meta.rowTotals[d]||(this.meta.rowKeys.push(m),this.meta.rowTotals[d]=this.meta.aggregator(this,m,[])),this.meta.rowTotals[d].push(a)),0!==b.length&&(this.meta.colTotals[c]||(this.meta.colKeys.push(b),this.meta.colTotals[c]=this.meta.aggregator(this,[],b)),this.meta.colTotals[c].push(a)),0!==b.length&&0!==m.length)return this.meta.tree[d]||(this.meta.tree[d]={}),this.meta.tree[d][c]||(this.meta.tree[d][c]=this.meta.aggregator(this,m,b)),this.meta.tree[d][c].push(a)},getAggregator:function(a,b){var c,d,e;return e=a.join(String.fromCharCode(0)),d=b.join(String.fromCharCode(0)),c=0===a.length&&0===b.length?this.meta.allTotal:0===a.length?this.meta.colTotals[d]:0===b.length?this.meta.rowTotals[e]:this.meta.tree[e][d],null!=c?c:{value:function(){return null},format:function(){return""}}},isExcluded:function(a,b){var c=this;return void 0===c.meta.attributeFilterExclusions[a]||!(c.meta.attributeFilterExclusions[a].indexOf(b)>=0)},addExclusionFilter:function(a,b){var c=this;if(void 0!==c.meta.attributeFilterExclusions[a]){var d=c.meta.attributeFilterExclusions[a].indexOf(b);d>=0?c.meta.attributeFilterExclusions[a].splice(d,1):c.meta.attributeFilterExclusions[a].push(b)}else c.meta.attributeFilterExclusions[a]=[],c.meta.attributeFilterExclusions[a].push(b);c.meta.attributeFilterInclusions[a]=[],angular.forEach(c.axisValues[a],function(b,d){c.meta.attributeFilterExclusions[a].indexOf(d)<0&&c.meta.attributeFilterInclusions[a].push(d)})},addInclusionFilter:function(a,b){var c=this;c.meta.attributeFilterInclusions[a]=[],c.meta.attributeFilterExclusions[a]=[],c.addExclusionFilter(a,b);var d=c.meta.attributeFilterInclusions[a];c.meta.attributeFilterInclusions[a]=c.meta.attributeFilterExclusions[a],c.meta.attributeFilterExclusions[a]=d}},b})}).call(this);
//# sourceMappingURL=PivotData.min.js.map