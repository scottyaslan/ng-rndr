{"version":3,"sources":["../../../src/plugins/data_views/PivotData.js"],"names":["callWithJQuery","factory","exports","module","require","define","amd","undefined","window","ngRNDR","plugins","dataViews","$","extend","jQuery","d3","PivotData","data","opts","this","dataUtils","filter","record","excludedItems","ref7","k","meta","attributeFilterExclusions","indexOf","call","sorters","axisValues","colAttrs","cols","rowAttrs","rows","valAttrs","vals","tree","rowKeys","colKeys","rowTotals","colTotals","sorted","aggregatorName","aggregator","name","aggregate","allTotal","self","convertToArray","availableAttributes","concat","tblCols","ref","results","hasProp","push","l","len1","length","x","shownAttributes","len2","n","c","hiddenAttributes","attributesAvailableForRowsAndCols","forEachRecord","derivedAttributes","base","v","_this","processRecord","prototype","constructor","arrSort","attrs","a","sortersArr","getSort","b","comparison","i","sorter","sortKeys","sort","getColKeys","getRowKeys","colKey","flatColKey","flatRowKey","ref1","ref2","ref3","rowKey","join","String","fromCharCode","getAggregator","agg","value","format","isExcluded","property","key","addExclusionFilter","attributeFilterName","filterByAttributeValue","index","splice","attributeFilterInclusions","angular","forEach","addInclusionFilter","oldAttributeFilterInclusions"],"mappings":"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","file":"PivotData.min.js"}