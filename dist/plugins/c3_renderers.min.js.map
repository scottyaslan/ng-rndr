{"version":3,"sources":["c3_renderers.min.js"],"names":["callWithJQuery","pivotModule","exports","module","require","define","amd","jQuery","c3","$","c3_renderers","makeC3Chart","chartOpts","pivotData","opts","agg","base","base1","base2","colKey","colKeys","columns","dataArray","datum","defaults","fullAggName","groupByTitle","h","hAxisTitle","headers","i","j","k","len","len1","len2","numCharsInHAxis","params","ref","renderArea","result","returnObject","rotationAngle","row","rowHeader","rowKey","rowKeys","title","titleText","tree2","vAxisTitle","val","x","y","localeStrings","vs","by","extend","size","width","window","innerWidth","height","innerHeight","type","getRowKeys","length","push","getColKeys","results","join","aggregatorName","valAttrs","colAttrs","rowAttrs","tree","parseFloat","format","value","getAggregator","isFinite","toPrecision","toFixed","style","text","axis","label","tick","rotate","multiline","data","tooltip","grouped","color","pattern","fit","json","keys","legend","show","name","a","b","c","d","categories","stacked","groups","l","len3","appendTo","bindto","generate","detach","remove","append","html","C3 - Line Chart","C3 - Bar Chart","C3 - Stacked Bar Chart","C3 - Area Chart","C3 - Scatter Chart","call","this"],"mappings":"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","file":"c3_renderers.min.js","sourcesContent":["(function() {\n  var callWithJQuery;\n\n  callWithJQuery = function(pivotModule) {\n    if (typeof exports === \"object\" && typeof module === \"object\") {\n      return pivotModule(require(\"jquery\"), require(\"c3\"));\n    } else if (typeof define === \"function\" && define.amd) {\n      return define([\"jquery\", \"c3\"], pivotModule);\n    } else {\n      return pivotModule(jQuery, c3);\n    }\n  };\n\n  callWithJQuery(function($, c3) {\n    var c3_renderers, makeC3Chart;\n    makeC3Chart = function(chartOpts) {\n      if (chartOpts == null) {\n        chartOpts = {};\n      }\n      return function(pivotData, opts) {\n        var agg, base, base1, base2, colKey, colKeys, columns, dataArray, datum, defaults, fullAggName, groupByTitle, h, hAxisTitle, headers, i, j, k, len, len1, len2, numCharsInHAxis, params, ref, renderArea, result, returnObject, rotationAngle, row, rowHeader, rowKey, rowKeys, title, titleText, tree2, vAxisTitle, val, x, y;\n        defaults = {\n          localeStrings: {\n            vs: \"vs\",\n            by: \"by\"\n          },\n          c3: {}\n        };\n        opts = $.extend(true, defaults, opts);\n        if ((base = opts.c3).size == null) {\n          base.size = {};\n        }\n        if ((base1 = opts.c3.size).width == null) {\n          base1.width = window.innerWidth / 1.4;\n        }\n        if ((base2 = opts.c3.size).height == null) {\n          base2.height = window.innerHeight / 1.4 - 50;\n        }\n        if (chartOpts.type == null) {\n          chartOpts.type = \"line\";\n        }\n        rowKeys = pivotData.getRowKeys();\n        if (rowKeys.length === 0) {\n          rowKeys.push([]);\n        }\n        colKeys = pivotData.getColKeys();\n        if (colKeys.length === 0) {\n          colKeys.push([]);\n        }\n        headers = (function() {\n          var i, len, results;\n          results = [];\n          for (i = 0, len = colKeys.length; i < len; i++) {\n            h = colKeys[i];\n            results.push(h.join(\"-\"));\n          }\n          return results;\n        })();\n        rotationAngle = 0;\n        fullAggName = pivotData.aggregatorName;\n        if (pivotData.valAttrs.length) {\n          fullAggName += \"(\" + (pivotData.valAttrs.join(\", \")) + \")\";\n        }\n        if (chartOpts.type === \"scatter\") {\n          dataArray = [];\n          hAxisTitle = pivotData.colAttrs.join(\"-\");\n          vAxisTitle = pivotData.rowAttrs.join(\"-\");\n          ref = pivotData.tree;\n          for (y in ref) {\n            tree2 = ref[y];\n            for (x in tree2) {\n              agg = tree2[x];\n              datum = {};\n              datum[hAxisTitle] = parseFloat(x);\n              datum[vAxisTitle] = parseFloat(y);\n              datum[\"tooltip\"] = agg.format(agg.value());\n              dataArray.push(datum);\n            }\n          }\n        } else {\n          numCharsInHAxis = 0;\n          for (i = 0, len = headers.length; i < len; i++) {\n            x = headers[i];\n            numCharsInHAxis += x.length;\n          }\n          if (numCharsInHAxis > 50) {\n            rotationAngle = 45;\n          }\n          columns = [];\n          for (j = 0, len1 = rowKeys.length; j < len1; j++) {\n            rowKey = rowKeys[j];\n            rowHeader = rowKey.join(\"-\");\n            row = [rowHeader === \"\" ? pivotData.aggregatorName : rowHeader];\n            for (k = 0, len2 = colKeys.length; k < len2; k++) {\n              colKey = colKeys[k];\n              val = parseFloat(pivotData.getAggregator(rowKey, colKey).value());\n              if (isFinite(val)) {\n                if (val < 1) {\n                  row.push(val.toPrecision(3));\n                } else {\n                  row.push(val.toFixed(3));\n                }\n              } else {\n                row.push(null);\n              }\n            }\n            columns.push(row);\n          }\n          vAxisTitle = pivotData.aggregatorName + (pivotData.valAttrs.length ? \"(\" + (pivotData.valAttrs.join(\", \")) + \")\" : \"\");\n          hAxisTitle = pivotData.colAttrs.join(\"-\");\n        }\n        titleText = fullAggName;\n        if (hAxisTitle !== \"\") {\n          titleText += \" \" + opts.localeStrings.vs + \" \" + hAxisTitle;\n        }\n        groupByTitle = pivotData.rowAttrs.join(\"-\");\n        if (groupByTitle !== \"\") {\n          titleText += \" \" + opts.localeStrings.by + \" \" + groupByTitle;\n        }\n        title = $(\"<p>\", {\n          style: \"text-align: center; font-weight: bold\"\n        });\n        title.text(titleText);\n        params = {\n          axis: {\n            y: {\n              label: vAxisTitle\n            },\n            x: {\n              label: hAxisTitle,\n              tick: {\n                rotate: rotationAngle,\n                multiline: false\n              }\n            }\n          },\n          data: {\n            type: chartOpts.type\n          },\n          tooltip: {\n            grouped: false\n          },\n          color: {\n            pattern: [\"#3366cc\", \"#dc3912\", \"#ff9900\", \"#109618\", \"#990099\", \"#0099c6\", \"#dd4477\", \"#66aa00\", \"#b82e2e\", \"#316395\", \"#994499\", \"#22aa99\", \"#aaaa11\", \"#6633cc\", \"#e67300\", \"#8b0707\", \"#651067\", \"#329262\", \"#5574a6\", \"#3b3eac\"]\n          }\n        };\n        $.extend(params, opts.c3);\n        if (chartOpts.type === \"scatter\") {\n          params.data.x = hAxisTitle;\n          params.axis.x.tick = {\n            fit: false\n          };\n          params.data.json = dataArray;\n          params.data.keys = {\n            value: [hAxisTitle, vAxisTitle]\n          };\n          params.legend = {\n            show: false\n          };\n          params.tooltip.format = {\n            title: function() {\n              return fullAggName;\n            },\n            name: function() {\n              return \"\";\n            },\n            value: function(a, b, c, d) {\n              return dataArray[d].tooltip;\n            }\n          };\n        } else {\n          params.axis.x.type = 'category';\n          params.axis.x.categories = headers;\n          params.data.columns = columns;\n        }\n        if (chartOpts.stacked != null) {\n          params.data.groups = [\n            (function() {\n              var l, len3, results;\n              results = [];\n              for (l = 0, len3 = rowKeys.length; l < len3; l++) {\n                x = rowKeys[l];\n                results.push(x.join(\"-\"));\n              }\n              return results;\n            })()\n          ];\n        }\n        renderArea = $(\"<div>\", {\n          style: \"display:none;\"\n        }).appendTo($(\"body\"));\n        result = $(\"<div>\").appendTo(renderArea);\n        params.bindto = result[0];\n        c3.generate(params);\n        result.detach();\n        renderArea.remove();\n        $(\"<div>\").append(title, result);\n        return returnObject = {\n          html: result\n        };\n      };\n    };\n    return c3_renderers = {\n      \"C3 - Line Chart\": makeC3Chart(),\n      \"C3 - Bar Chart\": makeC3Chart({\n        type: \"bar\"\n      }),\n      \"C3 - Stacked Bar Chart\": makeC3Chart({\n        type: \"bar\",\n        stacked: true\n      }),\n      \"C3 - Area Chart\": makeC3Chart({\n        type: \"area\",\n        stacked: true\n      }),\n      \"C3 - Scatter Chart\": makeC3Chart({\n        type: \"scatter\"\n      })\n    };\n  });\n\n}).call(this);\n\n//# sourceMappingURL=c3_renderers.js.map\n\n//# sourceMappingURL=c3_renderers.js.map\n"],"sourceRoot":"/source/"}