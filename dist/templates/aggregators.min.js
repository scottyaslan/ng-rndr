!function(a,b){"function"==typeof define&&define.amd?define("$rndrAggregatorsTemplates",[],function(){return a.rndr.templates.aggregators=b()}):"object"==typeof module&&module.exports?module.exports=a.rndr.templates.aggregators=b():a.rndr.templates.aggregators=b()}(this,function(){function a(){}a.prototype={constructor:a,add:function(a,b){this[a]=b},list:function(){return Object.keys(this)},count:function(a){if(null==a){var b=new Error("Aggregator Templates: cannot generate an aggregator-generating function because the formatter is null.");throw"undefined"!=typeof console&&null!==console&&console.error(b.stack),b}return function(){return function(b,c,d){return{count:0,push:function(){return this.count++},value:function(){return this.count},format:a}}}},countUnique:function(a){if(null==a){var b=new Error("Aggregator Templates: cannot generate an aggregator-generating function because the formatter is null.");throw"undefined"!=typeof console&&null!==console&&console.error(b.stack),b}return function(b){var c;return c=b[0],function(b,d,e){return{uniq:[],push:function(a){var b;if(b=a[c],this.uniq.indexOf(b)<0)return this.uniq.push(a[c])},value:function(){return this.uniq.length},format:a,numInputs:null!=c?0:1}}}},listUnique:function(a){return function(b){var c;return c=b[0],function(b,d,e){return{uniq:[],push:function(a){var b;if(b=a[c],this.uniq.indexOf(b)<0)return this.uniq.push(a[c])},value:function(){return this.uniq.join(a)},format:function(a){return a},numInputs:null!=c?0:1}}}},sum:function(a){if(null==a){var b=new Error("Aggregator Templates: cannot generate an aggregator-generating function because the formatter is null.");throw"undefined"!=typeof console&&null!==console&&console.error(b.stack),b}return function(b){var c;return c=b[0],function(b,d,e){return{sum:0,push:function(a){if(!isNaN(parseFloat(a[c])))return this.sum+=parseFloat(a[c])},value:function(){return this.sum},format:a,numInputs:null!=c?0:1}}}},min:function(a){if(null==a){var b=new Error("Aggregator Templates: cannot generate an aggregator-generating function because the formatter is null.");throw"undefined"!=typeof console&&null!==console&&console.error(b.stack),b}return function(b){var c;return c=b[0],function(b,d,e){return{val:null,push:function(a){var b,d;if(d=parseFloat(a[c]),!isNaN(d))return this.val=Math.min(d,null!=(b=this.val)?b:d)},value:function(){return this.val},format:a,numInputs:null!=c?0:1}}}},max:function(a){if(null==a){var b=new Error("Aggregator Templates: cannot generate an aggregator-generating function because the formatter is null.");throw"undefined"!=typeof console&&null!==console&&console.error(b.stack),b}return function(b){var c;return c=b[0],function(b,d,e){return{val:null,push:function(a){var b,d;if(d=parseFloat(a[c]),!isNaN(d))return this.val=Math.max(d,null!=(b=this.val)?b:d)},value:function(){return this.val},format:a,numInputs:null!=c?0:1}}}},average:function(a){if(null==a){var b=new Error("Aggregator Templates: cannot generate an aggregator-generating function because the formatter is null.");throw"undefined"!=typeof console&&null!==console&&console.error(b.stack),b}return function(b){var c;return c=b[0],function(b,d,e){return{sum:0,len:0,push:function(a){if(!isNaN(parseFloat(a[c])))return this.sum+=parseFloat(a[c]),this.len++},value:function(){return this.sum/this.len},format:a,numInputs:null!=c?0:1}}}},sumOverSum:function(a){if(null==a){var b=new Error("Aggregator Templates: cannot generate an aggregator-generating function because the formatter is null.");throw"undefined"!=typeof console&&null!==console&&console.error(b.stack),b}return function(b){var c,d;return d=b[0],c=b[1],function(b,e,f){return{sumNum:0,sumDenom:0,push:function(a){if(isNaN(parseFloat(a[d]))||(this.sumNum+=parseFloat(a[d])),!isNaN(parseFloat(a[c])))return this.sumDenom+=parseFloat(a[c])},value:function(){return this.sumNum/this.sumDenom},format:a,numInputs:null!=d&&null!=c?0:2}}}},sumOverSumBound80:function(a,b){if(null==a&&(a=!0),null==b){var c=new Error("Aggregator Templates: cannot generate an aggregator-generating function because the formatter is null.");throw"undefined"!=typeof console&&null!==console&&console.error(c.stack),c}return function(c){var d,e;return e=c[0],d=c[1],function(c,f,g){return{sumNum:0,sumDenom:0,push:function(a){if(isNaN(parseFloat(a[e]))||(this.sumNum+=parseFloat(a[e])),!isNaN(parseFloat(a[d])))return this.sumDenom+=parseFloat(a[d])},value:function(){var b;return b=a?1:-1,(.821187207574908/this.sumDenom+this.sumNum/this.sumDenom+1.2815515655446004*b*Math.sqrt(.410593603787454/(this.sumDenom*this.sumDenom)+this.sumNum*(1-this.sumNum/this.sumDenom)/(this.sumDenom*this.sumDenom)))/(1+1.642374415149816/this.sumDenom)},format:b,numInputs:null!=e&&null!=d?0:2}}}},fractionOf:function(a,b,c){if(null==b&&(b="total"),null==c){var d=new Error("Aggregator Templates: cannot generate an aggregator-generating function because the formatter is null.");throw"undefined"!=typeof console&&null!==console&&console.error(d.stack),d}return function(){var d;return d=1<=arguments.length?slice.call(arguments,0):[],function(e,f,g){return{selector:{total:[[],[]],row:[f,[]],col:[[],g]}[b],inner:a.apply(null,d)(e,f,g),push:function(a){return this.inner.push(a)},format:c,value:function(){return this.inner.value()/e.getAggregator.apply(e,this.selector).inner.value()},numInputs:a.apply(null,d)().numInputs}}}},quantile:function(a,b){return null==a&&(a=usFmt),function(c){var d;return d=c[0],function(c,e,f){return{vals:[],push:function(a){var b;if(b=parseFloat(a[d]),!isNaN(b))return this.vals.push(b)},value:function(){var a;return 0===this.vals.length?null:(this.vals.sort(),a=(this.vals.length-1)*b,(this.vals[Math.floor(a)]+this.vals[Math.ceil(a)])/2)},format:a,numInputs:null!=d?0:1}}}},runningStat:function(a,b,c){return null==a&&(a=usFmt),null==b&&(b="var"),null==c&&(c=1),function(d){var e;return e=d[0],function(d,f,g){return{n:0,m:0,s:0,push:function(a){var b,c;if(c=parseFloat(a[e]),!isNaN(c))return this.n+=1,1===this.n?this.m=c:(b=this.m+(c-this.m)/this.n,this.s=this.s+(c-this.m)*(c-b),this.m=b)},value:function(){if(this.n<=c)return 0;switch(b){case"var":return this.s/(this.n-c);case"stdev":return Math.sqrt(this.s/(this.n-c))}},format:a,numInputs:null!=e?0:1}}}}};var b=new a;return b});
//# sourceMappingURL=aggregators.min.js.map